# Git è‡ªåŠ¨åŒæ­¥é…ç½®è¯´æ˜Ž

## ðŸš€ åŠŸèƒ½è¯´æ˜Ž

æœ¬é¡¹ç›®å·²é…ç½® Git è‡ªåŠ¨åŒæ­¥åŠŸèƒ½ï¼Œæ¯æ¬¡æ‰§è¡Œ `git commit` åŽä¼šè‡ªåŠ¨æŽ¨é€åˆ° GitHubã€‚

## âœ¨ å·¥ä½œåŽŸç†

åœ¨ `.git/hooks/post-commit` æ–‡ä»¶ä¸­é…ç½®äº†æäº¤åŽé’©å­ï¼ˆpost-commit hookï¼‰ï¼Œæ¯æ¬¡æäº¤åŽè‡ªåŠ¨æ‰§è¡Œï¼š
```bash
git push origin main
```

## ðŸ“ ä½¿ç”¨ç¤ºä¾‹

### æ ‡å‡†æäº¤æµç¨‹

```bash
# 1. ä¿®æ”¹ä»£ç æ–‡ä»¶
vim install.sh

# 2. æŸ¥çœ‹ä¿®æ”¹
git status
git diff

# 3. æ·»åŠ æ–‡ä»¶åˆ°æš‚å­˜åŒº
git add .

# 4. æäº¤å˜æ›´ï¼ˆæŽ¨é€åˆ° GitHub ä¼šè‡ªåŠ¨å®Œæˆï¼‰
git commit -m "fix: ä¿®å¤ Node.js å…¼å®¹æ€§é—®é¢˜"

# æäº¤åŽä¼šè‡ªåŠ¨æ˜¾ç¤ºï¼š
# ==========================================
# ðŸš€ æ­£åœ¨è‡ªåŠ¨æŽ¨é€åˆ° GitHub...
# ==========================================
#
# ==========================================
# âœ… æŽ¨é€æˆåŠŸï¼
# ==========================================
```

### æäº¤å•ä¸ªæ–‡ä»¶

```bash
git add install.sh
git commit -m "fix: ä¿®å¤å®‰è£…è„šæœ¬"
```

### ä¿®æ”¹æœ€åŽä¸€æ¬¡æäº¤ï¼ˆå¦‚æžœå‘çŽ°é”™è¯¯ï¼‰

```bash
git add .
git commit --amend -m "fix: ä¿®å¤å®‰è£…è„šæœ¬å¹¶ä¼˜åŒ–é”™è¯¯å¤„ç†"
```

## âœ… ä¼˜ç‚¹

- **ç®€åŒ–æ“ä½œ**ï¼šæ— éœ€æ‰‹åŠ¨æ‰§è¡Œ `git push`
- **é˜²æ­¢é—å¿˜**ï¼šè‡ªåŠ¨æŽ¨é€ï¼Œé¿å…æœ¬åœ°æäº¤æœªåŒæ­¥
- **æé«˜æ•ˆçŽ‡**ï¼šå‡å°‘é‡å¤æ“ä½œï¼Œä¸€é”®å®Œæˆæäº¤+æŽ¨é€
- **åŠæ—¶åŒæ­¥**ï¼šæ¯æ¬¡æäº¤ç«‹å³æŽ¨é€åˆ°è¿œç¨‹ï¼Œä¾¿äºŽå›¢é˜Ÿåä½œ

## ðŸ› ï¸ ç¦ç”¨è‡ªåŠ¨åŒæ­¥ï¼ˆå¯é€‰ï¼‰

å¦‚æžœä¸éœ€è¦è‡ªåŠ¨æŽ¨é€ï¼Œå¯ä»¥ç¦ç”¨é’©å­ï¼š

### æ–¹å¼ 1ï¼šåˆ é™¤é’©å­æ–‡ä»¶
```bash
rm .git/hooks/post-commit
```

### æ–¹å¼ 2ï¼šç§»é™¤æ‰§è¡Œæƒé™ï¼ˆä¿ç•™æ–‡ä»¶ï¼‰
```bash
chmod -x .git/hooks/post-commit
```

### æ–¹å¼ 3ï¼šä¸´æ—¶è·³è¿‡ï¼ˆå•æ¬¡æäº¤ï¼‰
```bash
git add .
git commit --no-verify -m "æäº¤ä¿¡æ¯"
```
ä½¿ç”¨ `--no-verify` å‚æ•°å¯ä»¥è·³è¿‡æ‰€æœ‰é’©å­ã€‚

## ðŸ”„ é‡æ–°å¯ç”¨è‡ªåŠ¨åŒæ­¥

å¦‚æžœä¹‹å‰ç¦ç”¨äº†ï¼Œå¯ä»¥é‡æ–°å¯ç”¨ï¼š

### æ–¹å¼ 1ï¼šæ¢å¤æ‰§è¡Œæƒé™
```bash
chmod +x .git/hooks/post-commit
```

### æ–¹å¼ 2ï¼šé‡æ–°åˆ›å»ºé’©å­
```bash
cat > .git/hooks/post-commit << 'EOF'
#!/bin/bash
# Git æäº¤åŽè‡ªåŠ¨æŽ¨é€é’©å­ - æ¯æ¬¡æäº¤åŽè‡ªåŠ¨æŽ¨é€åˆ° GitHub

echo ""
echo "=========================================="
echo "ðŸš€ æ­£åœ¨è‡ªåŠ¨æŽ¨é€åˆ° GitHub..."
echo "=========================================="

git push origin main

if [ $? -eq 0 ]; then
    echo ""
    echo "=========================================="
    echo "âœ… æŽ¨é€æˆåŠŸï¼"
    echo "=========================================="
    echo ""
else
    echo ""
    echo "=========================================="
    echo "âŒ æŽ¨é€å¤±è´¥"
    echo "=========================================="
    echo ""
    echo "è¯·æ£€æŸ¥ï¼š"
    echo "1. ç½‘ç»œè¿žæŽ¥æ˜¯å¦æ­£å¸¸"
    echo "2. æ˜¯å¦æœ‰ä»“åº“æŽ¨é€æƒé™"
    echo "3. æ˜¯å¦æœ‰å†²çªéœ€è¦è§£å†³"
    echo ""
    echo "æ‰‹åŠ¨æŽ¨é€å‘½ä»¤ï¼š"
    echo "git push origin main"
    echo ""
fi
EOF

chmod +x .git/hooks/post-commit
```

## ðŸ“Œ æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œè¦æ±‚**ï¼šéœ€è¦èƒ½æ­£å¸¸è®¿é—® GitHub
2. **æƒé™è¦æ±‚**ï¼šéœ€è¦æœ‰ä»“åº“çš„æŽ¨é€æƒé™ï¼ˆSSH å¯†é’¥æˆ– Tokenï¼‰
3. **æŽ¨é€å¤±è´¥**ï¼šå¦‚æžœæŽ¨é€å¤±è´¥ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯ï¼Œéœ€è¦æ‰‹åŠ¨å¤„ç†
4. **å¤šåˆ†æ”¯**ï¼šå½“å‰é…ç½®åªæŽ¨é€åˆ° main åˆ†æ”¯ï¼Œå¦‚éœ€å…¶ä»–åˆ†æ”¯éœ€è¦ä¿®æ”¹é’©å­ä¸­çš„åˆ†æ”¯å
5. **SSH å¯†é’¥**ï¼šç¡®ä¿å·²é…ç½® SSH å¯†é’¥å¹¶èƒ½æˆåŠŸè¿žæŽ¥ GitHub

## ðŸ” æ•…éšœæŽ’æŸ¥

### æŽ¨é€å¤±è´¥

å¦‚æžœçœ‹åˆ°æŽ¨é€å¤±è´¥ï¼Œæ£€æŸ¥ï¼š
- ç½‘ç»œè¿žæŽ¥æ˜¯å¦æ­£å¸¸ï¼ˆ`ping github.com`ï¼‰
- æ˜¯å¦æœ‰æŽ¨é€æƒé™ï¼ˆGitHub ä»“åº“è®¾ç½®ï¼‰
- æ˜¯å¦æœ‰åˆå¹¶å†²çªï¼ˆ`git pull --rebase`ï¼‰
- SSH å¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®ï¼ˆ`ssh -T git@github.com`ï¼‰

```bash
# æ‰‹åŠ¨æŽ¨é€æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
git push origin main -v
```

### é’©å­æœªæ‰§è¡Œ

å¦‚æžœæäº¤åŽæ²¡æœ‰çœ‹åˆ°æŽ¨é€æ¶ˆæ¯ï¼š
```bash
# æ£€æŸ¥é’©å­æƒé™
ls -la .git/hooks/post-commit

# åº”è¯¥æ˜¾ç¤ºï¼š-rwxr-xr-x ... .git/hooks/post-commit

# å¦‚æžœæ²¡æœ‰æ‰§è¡Œæƒé™ï¼Œæ·»åŠ æƒé™
chmod +x .git/hooks/post-commit
```

### SSH å¯†é’¥é—®é¢˜

```bash
# æµ‹è¯• SSH è¿žæŽ¥
ssh -T git@github.com

# å¦‚æžœè¿žæŽ¥å¤±è´¥ï¼Œéœ€è¦é…ç½® SSH å¯†é’¥
# å‚è€ƒï¼šhttps://docs.github.com/zh/authentication/connecting-to-github-with-ssh
```

## ðŸ’¡ ä½¿ç”¨å»ºè®®

1. **å†™å¥½æäº¤ä¿¡æ¯**ï¼šéµå¾ª Conventional Commits è§„èŒƒï¼ˆfeat, fix, docs, chore, test ç­‰ï¼‰
2. **é¢‘ç¹æäº¤**ï¼šå°æ­¥å¿«è·‘ï¼Œæ¯æ¬¡å®Œæˆä¸€ä¸ªåŠŸèƒ½æˆ–ä¿®å¤å°±æäº¤
3. **åŠæ—¶åŒæ­¥**ï¼šè‡ªåŠ¨æŽ¨é€ç¡®ä¿æœ¬åœ°å’Œè¿œç¨‹å§‹ç»ˆä¿æŒä¸€è‡´
4. **æŸ¥çœ‹æ—¥å¿—**ï¼šæŽ¨é€æˆåŠŸåŽï¼Œå¯ä»¥åœ¨ GitHub æŸ¥çœ‹æäº¤åŽ†å²

### æäº¤ä¿¡æ¯è§„èŒƒç¤ºä¾‹

```bash
# æ–°åŠŸèƒ½
git commit -m "feat: æ·»åŠ ç”¨æˆ·ç™»å½•åŠŸèƒ½"

# ä¿®å¤ Bug
git commit -m "fix: ä¿®å¤ Node.js å…¼å®¹æ€§é—®é¢˜"

# æ–‡æ¡£æ›´æ–°
git commit -m "docs: æ›´æ–° README å®‰è£…è¯´æ˜Ž"

# ä»£ç é‡æž„
git commit -m "refactor: ä¼˜åŒ–å®‰è£…è„šæœ¬é€»è¾‘"

# æµ‹è¯•ç›¸å…³
git commit -m "test: æ·»åŠ å•å…ƒæµ‹è¯•"

# æ‚é¡¹/æž„å»º
git commit -m "chore: æ›´æ–°ä¾èµ–åŒ…ç‰ˆæœ¬"
```

## ðŸŽ¯ ç›¸å…³å‘½ä»¤

```bash
# æŸ¥çœ‹æäº¤åŽ†å²
git log --oneline

# æŸ¥çœ‹è¿œç¨‹ä»“åº“ä¿¡æ¯
git remote -v

# æŸ¥çœ‹å½“å‰åˆ†æ”¯
git branch

# æ‹‰å–æœ€æ–°ä»£ç ï¼ˆåˆå¹¶ï¼‰
git pull origin main

# æ‹‰å–æœ€æ–°ä»£ç ï¼ˆå˜åŸºï¼‰
git pull origin main --rebase

# æ‰‹åŠ¨æŽ¨é€ï¼ˆå¦‚æžœè‡ªåŠ¨æŽ¨é€å¤±è´¥ï¼‰
git push origin main

# å¼ºåˆ¶æŽ¨é€ï¼ˆè°¨æ…Žä½¿ç”¨ï¼‰
git push origin main --force
```

## ðŸ“ž èŽ·å–å¸®åŠ©

å¦‚æžœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹ Git å®˜æ–¹æ–‡æ¡£ï¼šhttps://git-scm.com/doc
2. æŸ¥çœ‹ GitHub æ–‡æ¡£ï¼šhttps://docs.github.com
3. æ£€æŸ¥ `.git/hooks/post-commit` æ–‡ä»¶å†…å®¹
